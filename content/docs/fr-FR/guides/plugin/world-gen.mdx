---
title: Système de Génération de Monde
description: Apprenez à créer des fonctionnalités de génération de monde personnalisées pour votre mod Hytale.
authors:
  - name: Neil Revin
    link: https://itsneil.dev
---

# Aperçu

Cette section couvre les systèmes de génération de monde procédurale de Hytale qui créent des environnements, des biomes et des structures de manière dynamique à mesure que les joueurs explorent le monde.

La génération de monde de Hytale est organisée en trois systèmes interconnectés :

- **Zones** - Régions à grande échelle qui définissent la structure globale du monde
- **Biomes** - Caractéristiques du terrain et propriétés environnementales au sein des zones
- **Grottes** - Structures souterraines et réseaux générés au sein des zones

Ces systèmes fonctionnent ensemble pour créer un monde riche et varié avec des transitions fluides et des thèmes régionaux cohérents.

## Pour Commencer

1. Système de Zones - Grandes régions
2. Système de Biomes - Terrain et environnement au sein des zones
3. Système de Grottes - Structures souterraines et réseaux au sein des zones

## Détails d'Implémentation

### Recherche et Génération de Zones

```java

// Get zone at position
ZonePatternGenerator zoneGen = /* world generator */;
ZoneGeneratorResult zoneResult = zoneGen.generate(seed, x, z);
Zone zone = zoneResult.getZone();

// Get biome within zone
BiomePatternGenerator biomeGen = zone.biomePatternGenerator();
Biome biome = biomeGen.generateBiomeAt(zoneResult, seed, x, z);

// Check for caves in zone
CaveGenerator caveGen = zone.caveGenerator();
if (caveGen != null) {
    CaveType[] caveTypes = caveGen.getCaveTypes();
    // Generate caves as needed
}
```

### Créer une Zone Personnalisée

```java
// Configure zone discovery
ZoneDiscoveryConfig discovery = new ZoneDiscoveryConfig(
    true,                           // Show notification
    "Custom Zone",                  // Display name
    "zone.forest.discover",         // Sound event
    "icons/forest.png",             // Icon
    true,                           // Major zone
    5.0f, 2.0f, 1.5f                // Duration, fade in, fade out
);

// Create biome pattern
IPointGenerator biomePoints;
IWeightedMap<TileBiome> tileBiomes;
CustomBiome[] customBiomes;

BiomePatternGenerator biomeGen = new BiomePatternGenerator(
    biomePoints,
    tileBiomes,
    customBiomes
);

// Create cave configuration
CaveType[] caveTypes; // cave definitions
CaveGenerator caveGen = new CaveGenerator(caveTypes);

// Assemble the zone
Zone customZone = new Zone(
    100,                    // Unique ID
    "new_custom_zone",      // Internal name
    discovery,              // Discovery config
    caveGen,                // Cave generator
    biomeGen,               // Biome pattern
    uniquePrefabs           // Unique structures
);
```

## Intégration des Systèmes

### Intégration Zone & Biome

Chaque zone définit son propre motif de biome :

```java
Zone zone = zoneGen.generate(seed, x, z).getZone();
BiomePatternGenerator biomeGen = zone.biomePatternGenerator();
Biome biome = biomeGen.generateBiomeAt(zoneResult, seed, x, z);
```

### Intégration Zone & Grotte

Chaque zone définit ses propres motifs de grottes :

```java
Zone zone = /* ... */;
CaveGenerator caveGen = zone.caveGenerator();
if (caveGen != null) {
    // This zone has caves
    CaveType[] types = caveGen.getCaveTypes();
}
```

### Intégration Biome & Grotte

Les grottes utilisent des masques de biome pour le contrôle du placement :

```java
// Cave type with biome restrictions
Int2FlagsCondition biomeMask = caveType.getBiomeMask();
int biomeId = biome.getId();
int flags = biomeMask.eval(biomeId);

// Check if cave can generate in this biome
if (CaveBiomeMaskFlags.canGenerate(flags)) {
    // Generate cave
}
```

### Transitions de Frontières

Tous les systèmes respectent les limites des zones :

```java
ZoneGeneratorResult result = zoneGen.generate(seed, x, z);
double borderDistance = result.getBorderDistance();

// Fade custom biomes near borders
if (borderDistance < customBiome.getFadeContainer().getMaskFadeSum()) {
    double factor = customBiome.getFadeContainer().getMaskFactor(result);
    // Apply fading
}
```
