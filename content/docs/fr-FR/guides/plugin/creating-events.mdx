---
title: Créer des Événements
description: Apprenez à créer des événements personnalisés pour votre mod Hytale.
authors:
  - name: Neil Revin
    link: https://itsneil.dev
  - name: EllieAU
    link: https://ellie.au
---

## Classe Event

Vous pouvez importer une classe Event et créer une fonction avec l'Event comme argument. [Cliquez ici](../../server/events) pour voir tous les événements disponibles.

Exemple de plugin lorsqu'un joueur est prêt (rejoint un serveur) :

```java

public class ExampleEvent {

    public static void onPlayerReady(PlayerReadyEvent event) {
        Player player = event.getPlayer();
        player.sendMessage(Message.raw("Welcome " + player.getDisplayName()));
    }

}
```

## Enregistrer l'Événement

Vous devez enregistrer tous les événements que vous créez dans la classe principale du plugin, généralement dans la fonction `setup`.

```java
public class MyPlugin extends JavaPlugin {

    @Override
    public void setup() {
        this.getEventRegistry().registerGlobal(PlayerReadyEvent.class, ExampleEvent::onPlayerReady);
    }
}
```

## Classes d'Événements ESC

Pour les événements qui relèvent de la liste [ESC Events](../../server/events#ecsevent), vous devrez plutôt créer et enregistrer un système d'événements d'entité.
Un exemple est inclus ci-dessous qui annulera la fabrication d'une recette si elle utilise de la fibre comme entrée.

```java
class ExampleCancelCraft extends EntityEventSystem<EntityStore, CraftRecipeEvent.Pre> {
    public ExampleCancelCraft() {
        super(CraftRecipeEvent.Pre.class);
    }

    @Override
    public void handle(int index,
                       @NonNullDecl ArchetypeChunk<EntityStore> archetypeChunk,
                       @NonNullDecl Store<EntityStore> store,
                       @NonNullDecl CommandBuffer<EntityStore> commandBuffer,
                       @NonNullDecl CraftRecipeEvent.Pre craftRecipeEvent) {
        CraftingRecipe recipe = craftRecipeEvent.getCraftedRecipe();
        if (recipe.getInput() != null) {
            for (MaterialQuantity mq : recipe.getInput()) {
                if (Objects.equals(mq.getItemId(), "Ingredient_Fibre")) {
                    craftRecipeEvent.setCancelled(true);
                    break;
                }
            }
        }
    }

    @Override
    public Query<EntityStore> getQuery() {
        return Archetype.empty();
    }
}
```

## Enregistrer les Événements ESC

Vous devrez enregistrer le système dans votre plugin :

```java
public class MyPlugin extends JavaPlugin {

    @Override
    public void setup() {
        this.getEntityStoreRegistry().registerSystem(new ExampleCancelCraft());
    }
}
```
